import{V as C,L as ce,M as fe,am as pe,u as H,N as de,a9 as me,aX as ve,a8 as U,ai as ye,a1 as Q,_ as F,a3 as O,a2 as b,ah as Se}from"./index.768f092d.js";import{u as Ee}from"./index.4a909841.js";import{aj as h,F as V,aM as he,an as E,as as we,aN as ge,h as R,am as Te,a as g,b as S,w as Le,e as Ae,i as T,j as A,k as z,z as q,m as Ce,u as f,n as k,E as Ne,C as N,A as ze,B as _e,H as be,X as ke,ak as ee,af as Ie,f as Oe,G as I,l as Re}from"./framework.ee329e82.js";import{a as Ye}from"./scroll.68b1e188.js";const Be=(e,r)=>{if(!C||!e||!r)return!1;const t=e.getBoundingClientRect();let s;return r instanceof Element?s=r.getBoundingClientRect():s={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<s.bottom&&t.bottom>s.top&&t.right>s.left&&t.left<s.right},Z=e=>{let r=0,t=e;for(;t;)r+=t.offsetTop,t=t.offsetParent;return r},Pe=(e,r)=>Math.abs(Z(e)-Z(r)),Qe=e=>{let r,t;return e.type==="touchend"?(t=e.changedTouches[0].clientY,r=e.changedTouches[0].clientX):e.type.startsWith("touch")?(t=e.touches[0].clientY,r=e.touches[0].clientX):(t=e.clientY,r=e.clientX),{clientX:r,clientY:t}};var y=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(y||{});function $(e){return h(e)&&e.type===V}function De(e){return h(e)&&e.type===he}function Me(e){return h(e)&&!$(e)&&!De(e)}const Fe=e=>{if(!h(e))return{};const r=e.props||{},t=(h(e.type)?e.type.props:void 0)||{},s={};return Object.keys(t).forEach(l=>{we(t[l],"default")&&(s[l]=t[l].default)}),Object.keys(r).forEach(l=>{s[ge(l)]=r[l]}),s},et=e=>{if(!E(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},M=e=>{const r=E(e)?e:[e],t=[];return r.forEach(s=>{var l;E(s)?t.push(...M(s)):h(s)&&E(s.children)?t.push(...M(s.children)):(t.push(s),h(s)&&((l=s.component)!=null&&l.subTree)&&t.push(...M(s.component.subTree)))}),t},Ve=["src","loading"],$e={key:0},He=R({name:"ElImage",inheritAttrs:!1}),xe=R({...He,props:ce,emits:fe,setup(e,{emit:r}){const t=e;let s="";const{t:l}=pe(),m=H("image"),w=Te(),a=Ee(),i=g(),u=g(!1),o=g(!0),c=g(!1),p=g(),d=g(),_=C&&"loading"in HTMLImageElement.prototype;let L,Y;const te=S(()=>w.style),ne=S(()=>{const{fit:n}=t;return C&&n?{objectFit:n}:{}}),B=S(()=>{const{previewSrcList:n}=t;return Array.isArray(n)&&n.length>0}),se=S(()=>{const{previewSrcList:n,initialIndex:v}=t;let W=v;return v>n.length-1&&(W=0),W}),x=S(()=>t.loading==="eager"?!1:!_&&t.loading==="lazy"||t.lazy),D=()=>{C&&(o.value=!0,u.value=!1,i.value=t.src)};function re(n){o.value=!1,u.value=!1,r("load",n)}function le(n){o.value=!1,u.value=!0,r("error",n)}function X(){Be(p.value,d.value)&&(D(),K())}const j=ye(X,200,!0);async function G(){var n;if(!C)return;await ke();const{scrollContainer:v}=t;ve(v)?d.value=v:ee(v)&&v!==""?d.value=(n=document.querySelector(v))!=null?n:void 0:p.value&&(d.value=Ye(p.value)),d.value&&(L=U(d,"scroll",j),setTimeout(()=>X(),100))}function K(){!C||!d.value||!j||(L==null||L(),d.value=void 0)}function ae(n){if(n.ctrlKey){if(n.deltaY<0)return n.preventDefault(),!1;if(n.deltaY>0)return n.preventDefault(),!1}}function oe(){B.value&&(Y=U("wheel",ae,{passive:!1}),s=document.body.style.overflow,document.body.style.overflow="hidden",c.value=!0,r("show"))}function ie(){Y==null||Y(),document.body.style.overflow=s,c.value=!1,r("close")}function ue(n){r("switch",n)}return Le(()=>t.src,()=>{x.value?(o.value=!0,u.value=!1,K(),G()):D()}),Ae(()=>{x.value?G():D()}),(n,v)=>(T(),A("div",{ref_key:"container",ref:p,class:k([f(m).b(),n.$attrs.class]),style:be(f(te))},[u.value?z(n.$slots,"error",{key:0},()=>[q("div",{class:k(f(m).e("error"))},Ce(f(l)("el.image.error")),3)]):(T(),A(V,{key:1},[i.value!==void 0?(T(),A("img",Ne({key:0},f(a),{src:i.value,loading:n.loading,style:f(ne),class:[f(m).e("inner"),f(B)&&f(m).e("preview"),o.value&&f(m).is("loading")],onClick:oe,onLoad:re,onError:le}),null,16,Ve)):N("v-if",!0),o.value?(T(),A("div",{key:1,class:k(f(m).e("wrapper"))},[z(n.$slots,"placeholder",{},()=>[q("div",{class:k(f(m).e("placeholder"))},null,2)])],2)):N("v-if",!0)],64)),f(B)?(T(),A(V,{key:2},[c.value?(T(),ze(f(de),{key:0,"z-index":n.zIndex,"initial-index":f(se),infinite:n.infinite,"zoom-rate":n.zoomRate,"url-list":n.previewSrcList,"hide-on-click-modal":n.hideOnClickModal,teleported:n.previewTeleported,"close-on-press-escape":n.closeOnPressEscape,onClose:ie,onSwitch:ue},{default:_e(()=>[n.$slots.viewer?(T(),A("div",$e,[z(n.$slots,"viewer")])):N("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):N("v-if",!0)],64)):N("v-if",!0)],6))}});var Xe=me(xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const tt=Q(Xe),je=F({prefixCls:{type:String}}),J=R({name:"ElSpaceItem",props:je,setup(e,{slots:r}){const t=H("space"),s=S(()=>`${e.prefixCls||t.b()}__item`);return()=>Ie("div",{class:s.value},z(r,"default"))}}),P={small:8,default:12,large:16};function Ge(e){const r=H("space"),t=S(()=>[r.b(),r.m(e.direction),e.class]),s=g(0),l=g(0),m=S(()=>{const a=e.wrap||e.fill?{flexWrap:"wrap",marginBottom:`-${l.value}px`}:{},i={alignItems:e.alignment};return[a,i,e.style]}),w=S(()=>{const a={paddingBottom:`${l.value}px`,marginRight:`${s.value}px`},i=e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{};return[a,i]});return Oe(()=>{const{size:a="small",wrap:i,direction:u,fill:o}=e;if(E(a)){const[c=0,p=0]=a;s.value=c,l.value=p}else{let c;O(a)?c=a:c=P[a||"small"]||P.small,(i||o)&&u==="horizontal"?s.value=l.value=c:u==="horizontal"?(s.value=c,l.value=0):(l.value=c,s.value=0)}}),{classes:t,containerStyle:m,itemStyle:w}}const Ke=F({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:b([String,Object,Array]),default:""},style:{type:b([String,Array,Object]),default:""},alignment:{type:b(String),default:"center"},prefixCls:{type:String},spacer:{type:b([Object,String,Number,Array]),default:null,validator:e=>h(e)||O(e)||ee(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:Se,validator:e=>O(e)||E(e)&&e.length===2&&e.every(O)}}),We=R({name:"ElSpace",props:Ke,setup(e,{slots:r}){const{classes:t,containerStyle:s,itemStyle:l}=Ge(e);function m(w,a="",i=[]){const{prefixCls:u}=e;return w.forEach((o,c)=>{$(o)?E(o.children)&&o.children.forEach((p,d)=>{$(p)&&E(p.children)?m(p.children,`${a+d}-`,i):i.push(I(J,{style:l.value,prefixCls:u,key:`nested-${a+d}`},{default:()=>[p]},y.PROPS|y.STYLE,["style","prefixCls"]))}):Me(o)&&i.push(I(J,{style:l.value,prefixCls:u,key:`LoopKey${a+c}`},{default:()=>[o]},y.PROPS|y.STYLE,["style","prefixCls"]))}),i}return()=>{var w;const{spacer:a,direction:i}=e,u=z(r,"default",{key:0},()=>[]);if(((w=u.children)!=null?w:[]).length===0)return null;if(E(u.children)){let o=m(u.children);if(a){const c=o.length-1;o=o.reduce((p,d,_)=>{const L=[...p,d];return _!==c&&L.push(I("span",{style:[l.value,i==="vertical"?"width: 100%":null],key:_},[h(a)?a:Re(a,y.TEXT)],y.STYLE)),L},[])}return I("div",{class:t.value,style:s.value},o,y.STYLE|y.CLASS)}return u.children}}}),nt=Q(We);export{tt as E,y as P,nt as a,Fe as b,Pe as c,et as e,M as f,Qe as g};
